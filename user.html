<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Sidebar 09</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/style.css" />
    <style>
      ul {
        list-style: none;
        padding: 0;
      }
      .tag-wrapper .tag-item {
        display: inline-block;
        font-size: 0.6rem;
        color: #67bc46;
        padding: 0.3rem;
        border: 1px solid;
        margin-bottom: 0.2rem;
        border-radius: 0.2rem;
        line-height: 0.8rem;
        margin-right: 0.2rem;
      }
      .star-wrapper {
        color: #67bc46;
      }
      .table-striped tbody tr:nth-of-type(odd) {
        background-color: white;
      }
      table.dataTable.table-striped > tbody > tr:nth-of-type(2n + 1) > * {
        box-shadow: none;
      }
      .dataTables_wrapper .dataTables_length select {
        margin-left: 0.4rem;
      }
      .btn-success {
        color: #fff;
        background-color: #67bc46;
        border-color: #67bc46;
      }
      .badge-success {
        color: #fff;
        background-color: #67bc46;
      }
      .badge {
        padding: 0.3rem 0.5rem;
        font-weight: 500;
      }
      .form-control {
        border: 1px solid #ccc;
      }
      .profile-img img {
        width: 7rem;
        height: 7rem;
      }
      .bootstrap-select .dropdown-menu {
        width: 100%;
      }
      .bootstrap-select .btn-group {
        width: 100%;
      }
      .selectedSpecWrapper {
        display: flex;
        flex-wrap: wrap;
        border: 2px solid #aaa;
        border-radius: 0.3rem;
        margin: 0.3rem;
        height: 8rem;
        overflow-y: scroll;
      }
      .selectedTagWrapper {
        display: flex;
        flex-wrap: wrap;
        border: 2px solid #aaa;
        border-radius: 0.3rem;
        margin: 0.3rem;
        height: 8rem;
        overflow-y: scroll;
      }
      .selectedItem {
        padding: 0.3rem 0.7rem;
        border: 1px solid #67bc46;
        height: 2.2rem;
        border-radius: 0.3rem;
        color: #67bc46;
        margin-bottom: 0.2rem;
        margin-right: 0.2rem;
      }
      .selectedItem .itemIcon {
        font-size: 0.9rem;
        margin-left: 0.3rem;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="my-loader-element"></div>
    <div id="my-loader-wrapper"></div>
    <div class="wrapper d-flex align-items-stretch">
      <nav id="sidebar">
        <div class="custom-menu">
          <button
            type="button"
            id="sidebarCollapse"
            class="btn btn-primary"
          ></button>
        </div>
        <div
          class="img bg-wrap text-center py-4"
          style="background-image: url(images/bg_1.jpg)"
        >
          <div class="user-logo mt-5">
            <img
              id="avatar"
              class="img"
              src="https://biohackingcongress.com/storage/users/June2023/9Q67Ebbs5rPLWWmWGZET.png"
            />
            <h3 id="username">Administrator</h3>
          </div>
        </div>
        <ul class="list-unstyled components mb-5">
          <li class="active">
            <a href="admin.html"><span class="fa fa-home mr-3"></span> Home</a>
          </li>
          <li>
            <a onclick="signOut(event)" href="#"
              ><span class="fa fa-sign-out mr-3"></span> Sign Out</a
            >
          </li>
        </ul>
      </nav>
      <!-- Page Content  -->
      <div id="content" class="p-4 p-md-5 pt-5">
        <h1
          class="fs-3 card-title fw-bold mt-sm-0 pt-md-5 mt-5 mb-4 pb-md-5 text-center"
        >
          Edit Profile
        </h1>
        <form id="registerForm" enctype="multipart/form-data">
          <div class="row">
            <div class="col-6">
              <div class="row">
                <div class="col-6">
                  <div class="mb-3">
                    <label>First Name</label>
                    <input
                      id="firstName"
                      type="text"
                      placeholder="First Name*"
                      class="form-control"
                      name="firstName"
                      value=""
                    />
                  </div>
                </div>
                <div class="col-6">
                  <div class="mb-3">
                    <label>Last Name</label>
                    <input
                      id="lastName"
                      type="text"
                      placeholder="Last Name*"
                      class="form-control"
                      name="lastName"
                      value=""
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="mb-3">
                    <label>Email</label>
                    <input
                      id="email"
                      type="email"
                      placeholder="Email*"
                      class="form-control"
                      name="email"
                      value=""
                    />
                  </div>
                </div>
                <div class="col-6">
                  <div class="mb-3">
                    <label>Phone</label>
                    <input
                      id="phone"
                      type="text"
                      placeholder="Phone*"
                      class="form-control"
                      name="phone"
                      value=""
                    />
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label>Sex</label>
                <select
                  name="sex"
                  placeholder="Sex"
                  class="form-select"
                  id="sex"
                >
                  <option selected class="Male">Male</option>
                  <option value="Female">Female</option>
                </select>
              </div>
              <div class="row g-3 pt-1 mb-2">
                <div class="d-flex align-items-center">
                  <label class="mx-2 mb-1">Avatar</label>
                  <div class="form-check mx-4">
                    <input
                      onchange="setImageLink()"
                      class="form-check-input"
                      type="radio"
                      name="flexRadioDefault"
                      id="flexRadioDefault1"
                      checked
                    />
                    <label class="form-check-label" for="flexRadioDefault1">
                      Use Image Link
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      onchange="setImageUpload()"
                      class="form-check-input"
                      type="radio"
                      name="flexRadioDefault"
                      id="flexRadioDefault2"
                    />
                    <label class="form-check-label" for="flexRadioDefault2">
                      Use Custom Image
                    </label>
                  </div>
                </div>
              </div>
              <div class="mb-2">
                <div class="d-flex align-items-center justify-content-center">
                  <input
                    id="avatarURL"
                    type="text"
                    placeholder="Image URL*"
                    class="form-control"
                    name="avatarURL"
                    value=""
                  />
                  <input
                    class="form-control d-none"
                    type="file"
                    id="avatarUpload"
                    accept="image/*"
                    style="height: auto !important"
                  />
                </div>
              </div>
              <div class="mb-3">
                <label>Specialty</label>
                <input
                  onclick="openSpecModal()"
                  id="speciality"
                  type="text"
                  placeholder="Specialty*"
                  class="form-control"
                  name="speciality"
                  value=""
                  readonly
                  style="background-color: white"
                />
              </div>
              <div class="mb-3">
                <label>Tags</label>
                <input
                  onclick="openTagModal()"
                  id="tags"
                  type="text"
                  placeholder="Tags*"
                  class="form-control"
                  name="tags"
                  value=""
                  readonly
                  style="background-color: white"
                />
              </div>
            </div>
            <div class="col-6">
              <div class="mb-3">
                <label>Address</label>
                <input
                  id="address"
                  type="text"
                  placeholder="Address*"
                  class="form-control"
                  name="address"
                  value=""
                />
              </div>
              <div class="row mb-3">
                <div class="col-6">
                  <label>City</label>
                  <input
                    id="city"
                    type="text"
                    placeholder="City*"
                    class="form-control"
                    name="City"
                    value=""
                  />
                </div>
                <div class="col-6">
                  <label>State</label>
                  <input
                    id="state"
                    type="text"
                    placeholder="State"
                    class="form-control"
                    name="state"
                    value=""
                  />
                </div>
              </div>
              <div class="row g-3 mb-3">
                <div class="col-6">
                  <label>ZipCode</label>
                  <input
                    id="zipcode"
                    type="text"
                    placeholder="ZipCode*"
                    class="form-control"
                    name="ZipCode"
                    value=""
                  />
                </div>
                <div class="col-6">
                  <label>Country</label>
                  <select id="country" class="form-select"></select>
                </div>
              </div>
              <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label"
                  >Review</label
                >
                <select
                  id="newReviewStar"
                  class="form-select"
                  aria-label="Default select example"
                >
                  <option value="" disabled selected>Select Review</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-center align-content-center">
            <button type="submit" class="btn btn-custom btn-custom-lg">
              Save
            </button>
          </div>
        </form>
      </div>
      <div class="modal" id="specialityModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">
                Select Specialty
              </h5>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#main_nav"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
            <div class="modal-body">
              <select
                onchange="changeSpecialty()"
                id="specialitySelect"
                class="selectpicker mb-2"
                data-actions-box="true"
                multiple
                data-width="100%"
                data-title="Select Specialty"
              ></select>
              <div class="d-flex mb-2">
                <input
                  id="customSpecialty"
                  type="text"
                  placeholder="Custom Speciality"
                  class="form-control mx-1"
                />
                <button
                  onclick="addSpecialty()"
                  type="button"
                  class="btn btn-custom mx-1"
                >
                  Add
                </button>
              </div>
              <div class="selectedSpecWrapper px-2 py-2 scrollBar-hidden">
                <div class="selectedItem">
                  <span class="mr-2">Element</span>
                  <span class="itemIcon"><i class="fa fa-minus"></i></span>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div
                class="d-flex align-items-center justify-content-center w-100"
              >
                <button
                  onclick="saveSelectSpecialty()"
                  type="button"
                  class="btn btn-success mx-1"
                >
                  Save
                </button>
                <button
                  onclick="cancelSelectSpecialty()"
                  type="button"
                  class="btn btn-danger mx-1"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal" id="tagModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Select Tag</h5>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#main_nav"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
            <div class="modal-body">
              <select
                onchange="changeTag()"
                id="tagSelect"
                class="selectpicker mb-2"
                data-actions-box="true"
                multiple
                data-width="100%"
                data-title="Select Specialty"
              ></select>
              <div class="d-flex mb-2">
                <input
                  id="customTag"
                  type="text"
                  placeholder="Custom Tag"
                  class="form-control mx-1"
                />
                <button
                  onclick="addTag()"
                  type="button"
                  class="btn btn-custom mx-1"
                >
                  Add
                </button>
              </div>
              <div class="selectedTagWrapper px-2 py-2 scrollBar-hidden">
                <div class="selectedItem">
                  <span class="mr-2">Element</span>
                  <span class="itemIcon"><i class="fa fa-minus"></i></span>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div
                class="d-flex align-items-center justify-content-center w-100"
              >
                <button
                  onclick="saveSelectTag()"
                  type="button"
                  class="btn btn-success mx-1"
                >
                  Save
                </button>
                <button
                  onclick="cancelSelectTag()"
                  type="button"
                  class="btn btn-danger mx-1"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="assets/js/main.js"></script>

    <script>
      var API_URL = "https://d32oo4yrlotqei.cloudfront.net/api/";
      var apiSpecs = [];
      var apiTags = [];

      var selectedSpecialty = [];
      var selectedTag = [];
      var customSpecialty = [];
      var customTag = [];
      var uniqueSpecialty = [];
      var uniqueTag = [];
      var data;
      var countries;

      async function getCountries() {
        await fetch(`https://trial.mobiscroll.com/content/countries.json`)
          .then((response) => response.json())
          .then((data) => {
            countries = data;
            var tmp = "";
            data.forEach((element) => {
              if (element.value == "US") {
                tmp += `<option value='${element.value}' selected>${element.text}</option>`;
              } else {
                tmp += `<option value='${element.value}'>${element.text}</option>`;
              }
            });
            $("#country").html(tmp);
          });
      }

      async function getData() {
        try {
          const urlParams = new URLSearchParams(window.location.search);
          const token = urlParams.get("token");
          const response = await fetch(`${API_URL}user`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: token,
            },
          });
          data = await response.json();
          console.log(data);

          data = data[0];
          writeData();
          disableLoader();
        } catch {
          // window.location.href = "login.html";
        }
      }

      async function getMetaData() {
        await fetch(`${API_URL}metaData`) // Replace with the actual backend URL
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json(); // Assuming the response is in JSON format
          })
          .then((data) => {
            apiSpecs = data.specs;
            apiTags = data.tags;

            var tmp = "";
            apiSpecs.forEach((element) => {
              tmp += `<option value='${element}'>${element}</option>`;
            });
            $("#specialitySelect").html(tmp);
            $("#specialitySelect").selectpicker("refresh");

            tmp = "";
            apiTags.forEach((element) => {
              tmp += `<option value='${element}'>${element}</option>`;
            });
            $("#tagSelect").html(tmp);
            $("#tagSelect").selectpicker("refresh");
          })
          .catch((error) => {
            console.error(
              "There was a problem with the fetch operation:",
              error
            );
          });
      }

      function setImageLink(e) {
        if ($("#flexRadioDefault1").prop("checked") == true) {
          $("#avatarURL").removeClass("d-none");
          $("#avatarUpload").addClass("d-none");
          $("#avatarUpload").val("");
        } else {
          $("#avatarURL").addClass("d-none");
          $("#avatarURL").val("");
          $("#avatarUpload").removeClass("d-none");
        }
      }

      function setImageUpload(e) {
        if ($("#flexRadioDefault2").prop("checked") == true) {
          $("#avatarURL").addClass("d-none");
          $("#avatarURL").val("");
          $("#avatarUpload").removeClass("d-none");
        } else {
          $("#avatarURL").removeClass("d-none");
          $("#avatarUpload").addClass("d-none");
          $("#avatarUpload").val("");
        }
      }

      function openSpecModal() {
        writeSelectedSpecialty();
        $("#specialityModal").modal();
      }

      function openTagModal() {
        writeSelectedTag();
        $("#tagModal").modal();
      }

      function writeSelectedSpecialty() {
        var tmp = "";
        var combinedArray = [];
        selectedSpecialty.forEach((element) => {
          combinedArray.push(element);
        });
        customSpecialty.forEach((element) => {
          combinedArray.push(element);
        });
        combinedArray.forEach((element, index) => {
          tmp += `<div class="selectedItem">
                                <span class="mr-2">${element}</span>
                                <span class="itemIcon" onclick="removeSpecItem('${element}')"><i class="fa fa-minus"></i></span>
                            </div>`;
        });
        $(".selectedSpecWrapper").html(tmp);
      }

      function writeSelectedTag() {
        var tmp = "";
        var combinedArray = [];
        selectedTag.forEach((element) => {
          combinedArray.push(element);
        });
        customTag.forEach((element) => {
          combinedArray.push(element);
        });
        combinedArray.forEach((element, index) => {
          tmp += `<div class="selectedItem">
                                <span class="mr-2">${element}</span>
                                <span class="itemIcon" onclick="removeTagItem('${element}')"><i class="fa fa-minus"></i></span>
                            </div>`;
        });
        $(".selectedTagWrapper").html(tmp);
      }

      function removeSpecItem(value) {
        customSpecialty.forEach((element, index) => {
          if (element == value) {
            customSpecialty.splice(index, 1);
          }
        });
        selectedSpecialty.forEach((element, index) => {
          if (element == value) {
            selectedSpecialty.splice(index, 1);
          }
        });
        writeSelectedSpecialty();
      }

      function removeTagItem(value) {
        customTag.forEach((element, index) => {
          if (element == value) {
            customTag.splice(index, 1);
          }
        });
        selectedTag.forEach((element, index) => {
          if (element == value) {
            selectedTag.splice(index, 1);
          }
        });
        writeSelectedTag();
      }

      function addSpecialty(e) {
        var value = $("#customSpecialty").val();
        if (value == "") {
          Toastify({
            text: "You should input the Specialty",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "linear-gradient(to right, #FF0026, #FF0026)",
            stopOnFocus: true,
          }).showToast();
          return;
        } else {
          if (
            selectedSpecialty.indexOf(value) > -1 ||
            customSpecialty.indexOf(value) > -1
          ) {
            Toastify({
              text: "Duplicated Specialty",
              duration: 3000,
              gravity: "top",
              position: "right",
              backgroundColor: "linear-gradient(to right, #FF0026, #FF0026)",
              stopOnFocus: true,
            }).showToast();
          } else {
            customSpecialty.push(value);
            writeSelectedSpecialty();
            $("#customSpecialty").val("");
          }
        }
      }

      function addTag(e) {
        var value = $("#customTag").val();
        if (value == "") {
          Toastify({
            text: "You should input the Tag",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "linear-gradient(to right, #FF0026, #FF0026)",
            stopOnFocus: true,
          }).showToast();
          return;
        } else {
          if (
            selectedTag.indexOf(value) > -1 ||
            customTag.indexOf(value) > -1
          ) {
            Toastify({
              text: "Duplicated Tag",
              duration: 3000,
              gravity: "top",
              position: "right",
              backgroundColor: "linear-gradient(to right, #FF0026, #FF0026)",
              stopOnFocus: true,
            }).showToast();
          } else {
            customTag.push(value);
            writeSelectedTag();
            $("#customTag").val("");
          }
        }
      }

      function changeSpecialty() {
        selectedSpecialty = $("#specialitySelect").val();
        writeSelectedSpecialty();
      }

      function changeTag() {
        selectedTag = $("#tagSelect").val();
        writeSelectedTag();
      }

      function cancelSelectSpecialty() {
        customSpecialty = [];
        selectedSpecialty = [];
        $("#customSpecialty").val("");
        $("#specialitySelect").val([]);
        $("#specialitySelect").selectpicker("refresh");
        writeSelectedSpecialty();
        $("#specialityModal").modal("hide");
      }

      function cancelSelectTag() {
        customTag = [];
        selectedTag = [];
        $("#customTag").val("");
        $("#tagSelect").val([]);
        $("#tagSelect").selectpicker("refresh");
        writeSelectedTag();
        $("#tagModal").modal("hide");
      }

      function saveSelectSpecialty() {
        var combinedArray = [];
        selectedSpecialty.forEach((element) => {
          combinedArray.push(element);
        });
        customSpecialty.forEach((element) => {
          combinedArray.push(element);
        });

        uniqueSpecialty = $.unique(combinedArray);
        $("#speciality").val(uniqueSpecialty.join(","));
        $("#specialityModal").modal("hide");
      }

      function saveSelectTag() {
        var combinedArray = [];
        selectedTag.forEach((element) => {
          combinedArray.push(element);
        });
        customTag.forEach((element) => {
          combinedArray.push(element);
        });

        uniqueTag = $.unique(combinedArray);
        $("#tags").val(uniqueTag.join(","));
        $("#tagModal").modal("hide");
      }

      $("#specialityModal").on("hidden.bs.modal", function () {
        saveSelectSpecialty();
      });

      $("#tagModal").on("hidden.bs.modal", function () {
        saveSelectTag();
      });

      function writeData() {
        $("#username").html(data.firstname + " " + data.lastname);
        $("#avatar").attr("src", data.imageURL);

        $("#firstName").val(data.firstname);
        $("#lastName").val(data.lastname);
        $("#email").val(data.email);
        $("#phone").val(data.phone);
        $("#sex").val(data.sex);
        $("#avatarURL").val(data.imageURL);

        $("#address").val(data.address);
        $("#city").val(data.city);
        $("#state").val(data.state);
        $("#zipcode").val(data.zipcode);
        countries.forEach((element) => {
          if (element.text == data.country) {
            $("#country").val(element.value);
          }
        });

        $("#speciality").val(data.specialty);
        data.specialty.split(",").forEach((element) => {
          if (element.charAt(0) == " ") {
            element = element.substring(1);
          }
          if (apiSpecs.indexOf(element) > -1) {
            selectedSpecialty.push(element);
          } else {
            customSpecialty.push(element);
          }
        });
        $("#specialitySelect").val(selectedSpecialty);
        $("#specialitySelect").selectpicker("refresh");
        writeSelectedSpecialty();

        $("#tags").val(data.tags);
        data.tags.split(",").forEach((element) => {
          if (element.charAt(0) == " ") {
            element = element.substring(1);
          }
          if (apiTags.indexOf(element) > -1) {
            selectedTag.push(element);
          } else {
            customTag.push(element);
          }
        });
        $("#tagSelect").val(selectedTag);
        $("#tagSelect").selectpicker("refresh");
        writeSelectedTag();
      }

      $("#registerForm").on("submit", async function (event) {
        event.preventDefault();
        const newSheetData = {
          firstname: $("#firstName").val(),
          lastname: $("#lastName").val(),
          specialty: $("#speciality").val(),
          imageURL: $("#avatarURL").val(),
          uploaded: 0,
          tags: $("#tags").val(),
          address: $("#address").val(),
          city: $("#city").val(),
          state: $("#state").val(),
          zipcode: $("#zipcode").val(),
          country: $("#country").val(),
          email: $("#email").val(),
          phone: $("#phone").val(),
          sex: $("#sex").val(),
          status: "active",
        };
        if ($("#avatarURL").hasClass("d-none")) {
          var formData = new FormData();
          formData.append("image", $("#avatarUpload")[0].files[0]);
          await $.ajax({
            url: `${API_URL}media`, // Replace with your backend endpoint
            type: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
              fielName = response;
              newSheetData.imageURL = response;
              newSheetData.uploaded = 1;
            },
            error: function (xhr, status, error) {
              console.log("Error uploading file: " + error);
            },
          });
        }

        sendDataToBackend(newSheetData);
      });

      async function sendDataToBackend(data) {
        const response = await fetch(`${API_URL}admin_new`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });
        const result = await response.json();
        if (result == "success") {
          Toastify({
            text: "Success",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "linear-gradient(to right, #67bc46, #67bc46)",
            stopOnFocus: true,
          }).showToast();
        } else if (result == "duplicated") {
          Toastify({
            text: "Practitioner is duplicated",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "linear-gradient(to right, #67bc46, #67bc46)",
            stopOnFocus: true,
          }).showToast();
        }
      }
      $(document).ready(async function () {
        await getCountries();
        // await getMetaData();
        await getData();
      });
    </script>
  </body>
</html>
